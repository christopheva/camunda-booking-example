<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="Definitions_06129a0" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="2.2.4">
  <bpmn:process id="booking" name="Booking" isExecutable="true">
    <bpmn:startEvent id="BookingCommand" name="BookingCommand">
      <bpmn:outgoing>SequenceFlow_0ivqwc6</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:serviceTask id="BookAirplance" name="BookAirplance" camunda:delegateExpression="#{airplaneEventListener}">
      <bpmn:incoming>SequenceFlow_0ivqwc6</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1erof55</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:endEvent id="BookingCompleted" name="BookingCompleted">
      <bpmn:incoming>SequenceFlow_0qk0cjy</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="SequenceFlow_0ivqwc6" sourceRef="BookingCommand" targetRef="BookAirplance" />
    <bpmn:sequenceFlow id="SequenceFlow_1erof55" sourceRef="BookAirplance" targetRef="Task_0ian2pr" />
    <bpmn:userTask id="Task_0ian2pr" name="Confirm airplane booking">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="airplaneConfirmed" label="Confirm airplane? AirplaneId = ${airplaneId}" type="boolean" defaultValue="true" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_1erof55</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0wi0n9b</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="ExclusiveGateway_1ayxs4o" name="Airplane booking confirmed?">
      <bpmn:incoming>SequenceFlow_0wi0n9b</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_11ms9bd</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_0b7yqu5</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_0wi0n9b" sourceRef="Task_0ian2pr" targetRef="ExclusiveGateway_1ayxs4o" />
    <bpmn:sequenceFlow id="SequenceFlow_11ms9bd" name="yes" sourceRef="ExclusiveGateway_1ayxs4o" targetRef="Task_1hbyist">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${airplaneConfirmed==true}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:endEvent id="BookingCancelled" name="BookingCancelled">
      <bpmn:incoming>SequenceFlow_0b7yqu5</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="SequenceFlow_0b7yqu5" name="no" sourceRef="ExclusiveGateway_1ayxs4o" targetRef="BookingCancelled">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${airplaneConfirmed==false}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_0qk0cjy" sourceRef="Task_11b90xi" targetRef="BookingCompleted" />
    <bpmn:exclusiveGateway id="ExclusiveGateway_0qtzum4" name="Hotel booking confirmed?">
      <bpmn:incoming>SequenceFlow_1i3nrdy</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0smozs2</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:serviceTask id="Task_1hbyist" name="BookHotel" camunda:delegateExpression="#{hotelEventListener}">
      <bpmn:incoming>SequenceFlow_11ms9bd</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1e94qyj</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="SequenceFlow_1e94qyj" sourceRef="Task_1hbyist" targetRef="Task_19ahk9m" />
    <bpmn:sequenceFlow id="SequenceFlow_1i3nrdy" sourceRef="Task_19ahk9m" targetRef="ExclusiveGateway_0qtzum4" />
    <bpmn:sequenceFlow id="SequenceFlow_0smozs2" name="yes" sourceRef="ExclusiveGateway_0qtzum4" targetRef="Task_0l447y9" />
    <bpmn:serviceTask id="Task_0l447y9" name="BookCar" camunda:delegateExpression="#{carEventListener}">
      <bpmn:incoming>SequenceFlow_0smozs2</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0bjt84v</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="SequenceFlow_0bjt84v" sourceRef="Task_0l447y9" targetRef="Task_01h7hb5" />
    <bpmn:exclusiveGateway id="ExclusiveGateway_0jmykkf" name="Car booking confirmed?">
      <bpmn:incoming>SequenceFlow_155vrkf</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1f98hcf</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_155vrkf" sourceRef="Task_01h7hb5" targetRef="ExclusiveGateway_0jmykkf" />
    <bpmn:sequenceFlow id="SequenceFlow_1f98hcf" name="yes" sourceRef="ExclusiveGateway_0jmykkf" targetRef="Task_11b90xi" />
    <bpmn:userTask id="Task_19ahk9m" name="Confirm hotel booking">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="FormField_3drljar" label="Confirm hotel? HotelId = ${hotelId}" type="boolean" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_1e94qyj</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1i3nrdy</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="Task_01h7hb5" name="Confirm car booking">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="FormField_2foitua" label="Confirm car? CarId = ${carId}" type="boolean" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_0bjt84v</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_155vrkf</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:task id="Task_11b90xi" name="SendConfirmation">
      <bpmn:incoming>SequenceFlow_1f98hcf</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0qk0cjy</bpmn:outgoing>
    </bpmn:task>
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="booking">
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="BookingCommand">
        <dc:Bounds x="227" y="151" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="203" y="194" width="85" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ServiceTask_00c9ejt_di" bpmnElement="BookAirplance">
        <dc:Bounds x="343" y="129" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_0638rif_di" bpmnElement="BookingCompleted">
        <dc:Bounds x="2084" y="151" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2059" y="194" width="87" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0ivqwc6_di" bpmnElement="SequenceFlow_0ivqwc6">
        <di:waypoint x="263" y="169" />
        <di:waypoint x="343" y="169" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1erof55_di" bpmnElement="SequenceFlow_1erof55">
        <di:waypoint x="443" y="169" />
        <di:waypoint x="513" y="169" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_1142eds_di" bpmnElement="Task_0ian2pr">
        <dc:Bounds x="513" y="129" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_1ayxs4o_di" bpmnElement="ExclusiveGateway_1ayxs4o" isMarkerVisible="true">
        <dc:Bounds x="668" y="144" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="652" y="106.5" width="82" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0wi0n9b_di" bpmnElement="SequenceFlow_0wi0n9b">
        <di:waypoint x="613" y="169" />
        <di:waypoint x="668" y="169" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_11ms9bd_di" bpmnElement="SequenceFlow_11ms9bd">
        <di:waypoint x="718" y="169" />
        <di:waypoint x="810" y="169" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="755" y="151" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="EndEvent_1u1qkb5_di" bpmnElement="BookingCancelled">
        <dc:Bounds x="675" y="580" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="649" y="623" width="89" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0b7yqu5_di" bpmnElement="SequenceFlow_0b7yqu5">
        <di:waypoint x="693" y="194" />
        <di:waypoint x="693" y="580" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="702" y="299" width="13" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0qk0cjy_di" bpmnElement="SequenceFlow_0qk0cjy">
        <di:waypoint x="1942" y="169" />
        <di:waypoint x="2084" y="169" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ExclusiveGateway_0qtzum4_di" bpmnElement="ExclusiveGateway_0qtzum4" isMarkerVisible="true">
        <dc:Bounds x="1154" y="144" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1145" y="201" width="68" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ServiceTask_0ijib0n_di" bpmnElement="Task_1hbyist">
        <dc:Bounds x="810" y="129" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1e94qyj_di" bpmnElement="SequenceFlow_1e94qyj">
        <di:waypoint x="910" y="169" />
        <di:waypoint x="983" y="169" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1i3nrdy_di" bpmnElement="SequenceFlow_1i3nrdy">
        <di:waypoint x="1083" y="169" />
        <di:waypoint x="1154" y="169" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0smozs2_di" bpmnElement="SequenceFlow_0smozs2">
        <di:waypoint x="1204" y="169" />
        <di:waypoint x="1313" y="169" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1250" y="151" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_0wm9ab2_di" bpmnElement="Task_0l447y9">
        <dc:Bounds x="1313" y="129" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0bjt84v_di" bpmnElement="SequenceFlow_0bjt84v">
        <di:waypoint x="1413" y="169" />
        <di:waypoint x="1475" y="169" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ExclusiveGateway_0jmykkf_di" bpmnElement="ExclusiveGateway_0jmykkf" isMarkerVisible="true">
        <dc:Bounds x="1645" y="144" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1640" y="201" width="60" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_155vrkf_di" bpmnElement="SequenceFlow_155vrkf">
        <di:waypoint x="1575" y="169" />
        <di:waypoint x="1645" y="169" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1f98hcf_di" bpmnElement="SequenceFlow_1f98hcf">
        <di:waypoint x="1695" y="169" />
        <di:waypoint x="1842" y="169" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1760" y="151" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="UserTask_0ri6fc0_di" bpmnElement="Task_19ahk9m">
        <dc:Bounds x="983" y="129" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_0dwy1i0_di" bpmnElement="Task_01h7hb5">
        <dc:Bounds x="1475" y="129" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_0f0imsd_di" bpmnElement="Task_11b90xi">
        <dc:Bounds x="1842" y="129" width="100" height="80" />
      </bpmndi:BPMNShape>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
