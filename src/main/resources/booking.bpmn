<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="Definitions_06129a0" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="3.0.1">
  <bpmn:message id="Message_1boal77" />
  <bpmn:message id="Message_0gb8q3j" name="HotelBookEventMessage" />
  <bpmn:message id="Message_01w6orf" name="BookCarCommandMessage" />
  <bpmn:message id="Message_12j1ox0" name="CarBookedEventMessage" />
  <bpmn:collaboration id="Collaboration_0kjqdo4">
    <bpmn:participant id="Participant_1gxkqp7" name="Happy holidays - main flow" processRef="booking" />
  </bpmn:collaboration>
  <bpmn:process id="booking" name="Booking" isExecutable="true">
    <bpmn:serviceTask id="BookAirplane" name="BookAirplane" camunda:asyncBefore="true" camunda:asyncAfter="true" camunda:delegateExpression="#{airplaneEventListener}">
      <bpmn:incoming>SequenceFlow_0ivqwc6</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1erof55</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:endEvent id="BookingCompleted" name="BookingCompleted">
      <bpmn:incoming>SequenceFlow_0qk0cjy</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:exclusiveGateway id="ExclusiveGateway_1ayxs4o" name="Airplane booking confirmed?">
      <bpmn:incoming>SequenceFlow_00513b4</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_10gjb0y</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:exclusiveGateway id="ExclusiveGateway_0qtzum4" name="Hotel booking confirmed?">
      <bpmn:incoming>SequenceFlow_1i3nrdy</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1awoe20</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:exclusiveGateway id="ExclusiveGateway_0jmykkf" name="Car booking confirmed?">
      <bpmn:incoming>SequenceFlow_0vo7qz6</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1f98hcf</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:endEvent id="BookingCancelled" name="BookingCancelled" />
    <bpmn:receiveTask id="Task_0mcu301" name="Hotel booked event receiver" messageRef="Message_0gb8q3j">
      <bpmn:incoming>SequenceFlow_1bkidsw</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1i3nrdy</bpmn:outgoing>
    </bpmn:receiveTask>
    <bpmn:serviceTask id="Task_0sa4fu8" name="BookHotelCommand" camunda:delegateExpression="${bookHotelCommand}">
      <bpmn:incoming>SequenceFlow_10gjb0y</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1bkidsw</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sendTask id="Task_1siszrv" name="BookCar Command" camunda:delegateExpression="${bookCarCommand}">
      <bpmn:incoming>SequenceFlow_1awoe20</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0ydaycm</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:receiveTask id="Task_0lzg262" name="Car booked event receiver" camunda:asyncBefore="true" camunda:asyncAfter="true" messageRef="Message_12j1ox0">
      <bpmn:incoming>SequenceFlow_0ydaycm</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0vo7qz6</bpmn:outgoing>
    </bpmn:receiveTask>
    <bpmn:serviceTask id="Task_11b90xi" name="SendConfirmation" camunda:delegateExpression="${serviceTaskLogger}">
      <bpmn:incoming>SequenceFlow_1f98hcf</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0qk0cjy</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:sequenceFlow id="SequenceFlow_1f98hcf" name="yes" sourceRef="ExclusiveGateway_0jmykkf" targetRef="Task_11b90xi" />
    <bpmn:sequenceFlow id="SequenceFlow_1i3nrdy" sourceRef="Task_0mcu301" targetRef="ExclusiveGateway_0qtzum4" />
    <bpmn:sequenceFlow id="SequenceFlow_0qk0cjy" sourceRef="Task_11b90xi" targetRef="BookingCompleted" />
    <bpmn:sequenceFlow id="SequenceFlow_1erof55" sourceRef="BookAirplane" targetRef="Task_0ian2pr" />
    <bpmn:sequenceFlow id="SequenceFlow_0ivqwc6" sourceRef="BookingCommand" targetRef="BookAirplane" />
    <bpmn:sequenceFlow id="SequenceFlow_10gjb0y" name="yes" sourceRef="ExclusiveGateway_1ayxs4o" targetRef="Task_0sa4fu8" />
    <bpmn:sequenceFlow id="SequenceFlow_1bkidsw" sourceRef="Task_0sa4fu8" targetRef="Task_0mcu301" />
    <bpmn:sequenceFlow id="SequenceFlow_1awoe20" sourceRef="ExclusiveGateway_0qtzum4" targetRef="Task_1siszrv" />
    <bpmn:sequenceFlow id="SequenceFlow_0vo7qz6" sourceRef="Task_0lzg262" targetRef="ExclusiveGateway_0jmykkf" />
    <bpmn:sequenceFlow id="SequenceFlow_0ydaycm" sourceRef="Task_1siszrv" targetRef="Task_0lzg262" />
    <bpmn:userTask id="Task_0ian2pr" name="Confirm airplane booking" camunda:assignee="kermit">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="airplaneConfirmed" label="Confirm airplane? AirplaneId = ${airplaneId}" type="boolean" defaultValue="true" />
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>SequenceFlow_1erof55</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_00513b4</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sequenceFlow id="SequenceFlow_00513b4" sourceRef="Task_0ian2pr" targetRef="ExclusiveGateway_1ayxs4o" />
    <bpmn:startEvent id="BookingCommand" name="BookingCommand">
      <bpmn:outgoing>SequenceFlow_0ivqwc6</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:association id="Association_14hglju" sourceRef="Task_0mcu301" targetRef="TextAnnotation_0rbrsw5" />
    <bpmn:association id="Association_156jkfh" sourceRef="Task_0sa4fu8" targetRef="TextAnnotation_0rbrsw5" />
    <bpmn:association id="Association_1ozoida" sourceRef="Task_1siszrv" targetRef="TextAnnotation_0deabad" />
    <bpmn:textAnnotation id="TextAnnotation_0deabad">
      <bpmn:text>Camunda message - External process
10s process duration</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:association id="Association_0mklvp1" sourceRef="Task_0lzg262" targetRef="TextAnnotation_0deabad" />
    <bpmn:textAnnotation id="TextAnnotation_0rbrsw5">
      <bpmn:text>AMQ - External
10s delivery delay</bpmn:text>
    </bpmn:textAnnotation>
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Collaboration_0kjqdo4">
      <bpmndi:BPMNShape id="Participant_1gxkqp7_di" bpmnElement="Participant_1gxkqp7" isHorizontal="true">
        <dc:Bounds x="156" y="81" width="1980" height="365" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="TextAnnotation_0rbrsw5_di" bpmnElement="TextAnnotation_0rbrsw5">
        <dc:Bounds x="878" y="110" width="114" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="BookingCommand">
        <dc:Bounds x="222" y="219" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="198" y="262" width="85" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ServiceTask_00c9ejt_di" bpmnElement="BookAirplane">
        <dc:Bounds x="339" y="197" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_0638rif_di" bpmnElement="BookingCompleted">
        <dc:Bounds x="2080" y="219" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2055" y="262" width="87" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_1ayxs4o_di" bpmnElement="ExclusiveGateway_1ayxs4o" isMarkerVisible="true">
        <dc:Bounds x="664" y="212" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="648" y="175" width="82" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_0qtzum4_di" bpmnElement="ExclusiveGateway_0qtzum4" isMarkerVisible="true">
        <dc:Bounds x="1150" y="212" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1141" y="174.5" width="68" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_0jmykkf_di" bpmnElement="ExclusiveGateway_0jmykkf" isMarkerVisible="true">
        <dc:Bounds x="1641" y="212" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1636" y="174.5" width="60" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_1u1qkb5_di" bpmnElement="BookingCancelled">
        <dc:Bounds x="671" y="390" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="645" y="433" width="89" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ReceiveTask_0reg3it_di" bpmnElement="Task_0mcu301">
        <dc:Bounds x="979" y="197" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ServiceTask_0o0uja8_di" bpmnElement="Task_0sa4fu8">
        <dc:Bounds x="806" y="197" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="SendTask_1tjgzqt_di" bpmnElement="Task_1siszrv">
        <dc:Bounds x="1270" y="197" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ReceiveTask_1nvvpef_di" bpmnElement="Task_0lzg262">
        <dc:Bounds x="1456" y="197" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="UserTask_1142eds_di" bpmnElement="Task_0ian2pr">
        <dc:Bounds x="503" y="197" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Association_14hglju_di" bpmnElement="Association_14hglju">
        <di:waypoint x="995" y="197" />
        <di:waypoint x="951" y="146" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Association_156jkfh_di" bpmnElement="Association_156jkfh">
        <di:waypoint x="885" y="197" />
        <di:waypoint x="922" y="146" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1f98hcf_di" bpmnElement="SequenceFlow_1f98hcf">
        <di:waypoint x="1691" y="237" />
        <di:waypoint x="1838" y="237" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1756" y="219" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1i3nrdy_di" bpmnElement="SequenceFlow_1i3nrdy">
        <di:waypoint x="1079" y="237" />
        <di:waypoint x="1150" y="237" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0qk0cjy_di" bpmnElement="SequenceFlow_0qk0cjy">
        <di:waypoint x="1938" y="237" />
        <di:waypoint x="2080" y="237" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1erof55_di" bpmnElement="SequenceFlow_1erof55">
        <di:waypoint x="439" y="237" />
        <di:waypoint x="503" y="237" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0ivqwc6_di" bpmnElement="SequenceFlow_0ivqwc6">
        <di:waypoint x="258" y="237" />
        <di:waypoint x="339" y="237" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_10gjb0y_di" bpmnElement="SequenceFlow_10gjb0y">
        <di:waypoint x="714" y="237" />
        <di:waypoint x="806" y="237" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="751" y="219" width="18" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1bkidsw_di" bpmnElement="SequenceFlow_1bkidsw">
        <di:waypoint x="906" y="237" />
        <di:waypoint x="979" y="237" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1awoe20_di" bpmnElement="SequenceFlow_1awoe20">
        <di:waypoint x="1200" y="237" />
        <di:waypoint x="1270" y="237" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0vo7qz6_di" bpmnElement="SequenceFlow_0vo7qz6">
        <di:waypoint x="1556" y="237" />
        <di:waypoint x="1641" y="237" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="ServiceTask_0ytv2mb_di" bpmnElement="Task_11b90xi">
        <dc:Bounds x="1838" y="197" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0ydaycm_di" bpmnElement="SequenceFlow_0ydaycm">
        <di:waypoint x="1370" y="237" />
        <di:waypoint x="1456" y="237" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="TextAnnotation_0deabad_di" bpmnElement="TextAnnotation_0deabad">
        <dc:Bounds x="1307" y="115" width="229" height="39" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Association_1ozoida_di" bpmnElement="Association_1ozoida">
        <di:waypoint x="1360" y="197" />
        <di:waypoint x="1404" y="154" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Association_0mklvp1_di" bpmnElement="Association_0mklvp1">
        <di:waypoint x="1473" y="197" />
        <di:waypoint x="1438" y="154" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_00513b4_di" bpmnElement="SequenceFlow_00513b4">
        <di:waypoint x="603" y="237" />
        <di:waypoint x="664" y="237" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
